(this.webpackJsonpmqttreact=this.webpackJsonpmqttreact||[]).push([[0],{121:function(e,t){},135:function(e,t,a){e.exports=a(226)},142:function(e,t,a){},160:function(e,t){},162:function(e,t){},216:function(e,t){},218:function(e,t){},224:function(e,t,a){},226:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(125),r=a.n(o),l=(a(142),a(36)),s=a(232),i=a(229),m=a(230),u=a(69),b=a(234),p=a(231),E=a(131),f=function(e){var t=e.connect,a=e.disconnect,n=e.connectBtn,o=s.a.useForm(),r=Object(l.a)(o,1)[0],f={protocol:"ws",host:"broker.emqx.io",clientId:"emqx_react_"+Math.random().toString(16).substring(2,8),port:8083,username:"emqx_test",password:"emqx_test"},d=c.a.createElement(s.a,{layout:"vertical",name:"basic",form:r,initialValues:f,onFinish:function(e){var a=e.protocol,n=e.host,c=e.clientId,o=e.port,r=e.username,l=e.password,s="".concat(a,"://").concat(n,":").concat(o,"/mqtt");t(s,{clientId:c,username:r,password:l,clean:!0,reconnectPeriod:1e3,connectTimeout:3e4})}},c.a.createElement(i.a,{gutter:20},c.a.createElement(m.a,{span:8},c.a.createElement(s.a.Item,{label:"Protocol",name:"protocol"},c.a.createElement(u.a,{onChange:function(e){r.setFieldsValue({port:"wss"===e?8084:8083})}},c.a.createElement(u.a.Option,{value:"ws"},"ws"),c.a.createElement(u.a.Option,{value:"wss"},"wss")))),c.a.createElement(m.a,{span:8},c.a.createElement(s.a.Item,{label:"Host",name:"host"},c.a.createElement(b.a,null))),c.a.createElement(m.a,{span:8},c.a.createElement(s.a.Item,{label:"Port",name:"port"},c.a.createElement(b.a,null))),c.a.createElement(m.a,{span:8},c.a.createElement(s.a.Item,{label:"Client ID",name:"clientId"},c.a.createElement(b.a,null))),c.a.createElement(m.a,{span:8},c.a.createElement(s.a.Item,{label:"Username",name:"username"},c.a.createElement(b.a,null))),c.a.createElement(m.a,{span:8},c.a.createElement(s.a.Item,{label:"Password",name:"password"},c.a.createElement(b.a,null)))));return c.a.createElement(p.a,{title:"Connection",actions:[c.a.createElement(E.a,{type:"primary",onClick:function(){r.submit()}},n),c.a.createElement(E.a,{danger:!0,onClick:function(){a()}},"Disconnect")]},d)},d=function(e){var t=e.publish,a=s.a.useForm(),o=Object(l.a)(a,1)[0],r=Object(n.useContext)(O),f=c.a.createElement(s.a,{layout:"vertical",name:"basic",form:o,initialValues:{topic:"testtopic/react",qos:0},onFinish:function(e){t(e)}},c.a.createElement(i.a,{gutter:20},c.a.createElement(m.a,{span:12},c.a.createElement(s.a.Item,{label:"Topic",name:"topic"},c.a.createElement(b.a,null))),c.a.createElement(m.a,{span:12},c.a.createElement(s.a.Item,{label:"QoS",name:"qos"},c.a.createElement(u.a,{options:r}))),c.a.createElement(m.a,{span:24},c.a.createElement(s.a.Item,{label:"Payload",name:"payload"},c.a.createElement(b.a.TextArea,null))),c.a.createElement(m.a,{span:8,offset:16,style:{textAlign:"right"}},c.a.createElement(s.a.Item,null,c.a.createElement(E.a,{type:"primary",htmlType:"submit"},"Publish")))));return c.a.createElement(p.a,{title:"Publisher"},f)},g=function(e){var t=e.sub,a=e.unSub,o=e.showUnsub,r=s.a.useForm(),f=Object(l.a)(r,1)[0],d=Object(n.useContext)(O),g=c.a.createElement(s.a,{layout:"vertical",name:"basic",form:f,initialValues:{topic:"testtopic/react",qos:0},onFinish:function(e){t(e)}},c.a.createElement(i.a,{gutter:20},c.a.createElement(m.a,{span:12},c.a.createElement(s.a.Item,{label:"Topic",name:"topic"},c.a.createElement(b.a,null))),c.a.createElement(m.a,{span:12},c.a.createElement(s.a.Item,{label:"QoS",name:"qos"},c.a.createElement(u.a,{options:d}))),c.a.createElement(m.a,{span:8,offset:16,style:{textAlign:"right"}},c.a.createElement(s.a.Item,null,c.a.createElement(E.a,{type:"primary",htmlType:"submit"},"Subscribe"),o?c.a.createElement(E.a,{type:"danger",style:{marginLeft:"10px"},onClick:function(){var e=f.getFieldsValue();a(e)}},"Unsubscribe"):null))));return c.a.createElement(p.a,{title:"Subscriber"},g)},h=a(132),v=a(233),y=function(e){var t=e.payload,a=Object(n.useState)([]),o=Object(l.a)(a,2),r=o[0],s=o[1];Object(n.useEffect)((function(){t.topic&&s((function(e){return[].concat(Object(h.a)(e),[t])}))}),[t]);return c.a.createElement(p.a,{title:"Receiver"},c.a.createElement(v.b,{size:"small",bordered:!0,dataSource:r,renderItem:function(e){return c.a.createElement(v.b.Item,null,c.a.createElement(v.b.Item.Meta,{title:e.topic,description:e.message}))}}))},I=a(129),w=a.n(I),O=Object(n.createContext)([]),j=[{label:"0",value:0},{label:"1",value:1},{label:"2",value:2}],q=function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],o=t[1],r=Object(n.useState)(!1),s=Object(l.a)(r,2),i=s[0],m=s[1],u=Object(n.useState)({}),b=Object(l.a)(u,2),p=b[0],E=b[1],h=Object(n.useState)("Connect"),v=Object(l.a)(h,2),I=v[0],q=v[1];Object(n.useEffect)((function(){a&&(a.on("connect",(function(){q("Connected"),console.log("connection successful")})),a.on("error",(function(e){console.error("Connection error: ",e),a.end()})),a.on("reconnect",(function(){q("Reconnecting")})),a.on("message",(function(e,t){var a={topic:e,message:t.toString()};E(a),console.log("received message: ".concat(t," from topic: ").concat(e))})))}),[a]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(f,{connect:function(e,t){q("Connecting"),o(w.a.connect(e,t))},disconnect:function(){if(a)try{a.end(!1,(function(){q("Connect"),console.log("disconnected successfully")}))}catch(e){console.log("disconnect error:",e)}},connectBtn:I}),c.a.createElement(O.Provider,{value:j},c.a.createElement(g,{sub:function(e){if(a){var t=e.topic,n=e.qos;a.subscribe(t,{qos:n},(function(e){e?console.log("Subscribe to topics error",e):(console.log("Subscribe to topics: ".concat(t)),m(!0))}))}},unSub:function(e){if(a){var t=e.topic,n=e.qos;a.unsubscribe(t,{qos:n},(function(e){e?console.log("Unsubscribe error",e):(console.log("unsubscribed topic: ".concat(t)),m(!1))}))}},showUnsub:i}),c.a.createElement(d,{publish:function(e){if(a){var t=e.topic,n=e.qos,c=e.payload;a.publish(t,c,{qos:n},(function(e){e&&console.log("Publish error: ",e)}))}}})),c.a.createElement(y,{payload:p}))};a(224);var S=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(q,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.createRoot(document.getElementById("root")).render(c.a.createElement(S,null)),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[135,1,2]]]);
//# sourceMappingURL=main.822fb43d.chunk.js.map