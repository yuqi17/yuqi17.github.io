(this.webpackJsonpmqttreact=this.webpackJsonpmqttreact||[]).push([[0],{136:function(e,t){},151:function(e,t,a){e.exports=a(242)},158:function(e,t,a){},176:function(e,t){},178:function(e,t){},232:function(e,t){},234:function(e,t){},240:function(e,t,a){},242:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(140),l=a.n(o),r=(a(158),a(41)),s=a(247),i=a(244),m=a(245),u=a(81),p=a(249),b=a(246),E=a(147),f=function(e){var t=e.connect,a=e.disconnect,n=e.connectBtn,o=s.a.useForm(),l=Object(r.a)(o,1)[0],f=c.a.createElement(s.a,{layout:"vertical",name:"basic",form:l,initialValues:{protocol:"wss",host:"broker.emqx.io",clientId:"mqttx_27004980",port:8084,username:"jonas",password:"abc123"},onFinish:function(e){var a=e.protocol,n=e.host,c=e.clientId,o=e.port,l=e.username,r=e.password,s="".concat(a,"://").concat(n,":").concat(o,"/mqtt");t(s,{clientId:c,username:l,password:r,clean:!0,reconnectPeriod:1e3,connectTimeout:3e4})}},c.a.createElement(i.a,{gutter:20},c.a.createElement(m.a,{lg:{span:8},sm:{span:24}},c.a.createElement(s.a.Item,{label:"Protocol",name:"protocol"},c.a.createElement(u.a,{onChange:function(e){l.setFieldsValue({port:"wss"===e?8084:8083})}},c.a.createElement(u.a.Option,{value:"ws"},"ws"),c.a.createElement(u.a.Option,{value:"wss"},"wss")))),c.a.createElement(m.a,{lg:{span:8},sm:{span:24}},c.a.createElement(s.a.Item,{label:"Host",name:"host"},c.a.createElement(p.a,null))),c.a.createElement(m.a,{lg:{span:8},sm:{span:24}},c.a.createElement(s.a.Item,{label:"Port",name:"port"},c.a.createElement(p.a,null))),c.a.createElement(m.a,{lg:{span:8},sm:{span:24}},c.a.createElement(s.a.Item,{label:"Client ID",name:"clientId"},c.a.createElement(p.a,null))),c.a.createElement(m.a,{lg:{span:8},sm:{span:24}},c.a.createElement(s.a.Item,{label:"Username",name:"username"},c.a.createElement(p.a,null))),c.a.createElement(m.a,{lg:{span:8},sm:{span:24}},c.a.createElement(s.a.Item,{label:"Password",name:"password"},c.a.createElement(p.a,null)))));return c.a.createElement(b.a,{title:"Connection",actions:[c.a.createElement(E.a,{type:"primary",onClick:function(){l.submit()}},n),c.a.createElement(E.a,{danger:!0,onClick:function(){a()}},"Disconnect")]},f)},d=a(250),g=function(e){var t=e.publish,a=s.a.useForm(),o=Object(r.a)(a,1)[0],l=Object(n.useContext)(C),f=c.a.createElement(s.a,{layout:"vertical",name:"basic",form:o,initialValues:{topic:"switch",qos:0,payload:'{state:"on"}'},onFinish:function(e){t(e)}},c.a.createElement(i.a,{gutter:20},c.a.createElement(m.a,{span:12},c.a.createElement(s.a.Item,{label:"Topic",name:"topic"},c.a.createElement(p.a,null))),c.a.createElement(m.a,{span:12},c.a.createElement(s.a.Item,{label:"QoS",name:"qos"},c.a.createElement(u.a,{options:l}))),c.a.createElement(m.a,{span:24},c.a.createElement(s.a.Item,{label:"Payload",name:"payload"},c.a.createElement(p.a.TextArea,null))),c.a.createElement(m.a,{span:8,offset:16,style:{textAlign:"right"}},c.a.createElement(s.a.Item,null,c.a.createElement(E.a,{type:"primary",htmlType:"submit"},"Publish")))),c.a.createElement(i.a,null,c.a.createElement(m.a,null,c.a.createElement(d.a,{checkedChildren:"\u5f00\u542f",unCheckedChildren:"\u5173\u95ed",defaultChecked:!1,onChange:function(e,a){t({topic:"switch",qos:0,payload:'{state:"'.concat(e?"on":"off",'"}')})}}))));return c.a.createElement(b.a,{title:"Publisher"},f)},h=function(e){var t=e.sub,a=e.unSub,o=e.showUnsub,l=s.a.useForm(),f=Object(r.a)(l,1)[0],d=Object(n.useContext)(C),g=c.a.createElement(s.a,{layout:"vertical",name:"basic",form:f,initialValues:{topic:"weather",qos:0},onFinish:function(e){t(e)}},c.a.createElement(i.a,{gutter:20},c.a.createElement(m.a,{lg:{span:12},sm:{span:24}},c.a.createElement(s.a.Item,{label:"Topic",name:"topic"},c.a.createElement(p.a,null))),c.a.createElement(m.a,{lg:{span:12},sm:{span:24}},c.a.createElement(s.a.Item,{label:"QoS",name:"qos"},c.a.createElement(u.a,{options:d}))),c.a.createElement(m.a,{lg:{span:12},sm:{span:24}},c.a.createElement(s.a.Item,null,c.a.createElement(E.a,{type:"primary",htmlType:"submit"},"Subscribe"),o?c.a.createElement(E.a,{type:"danger",style:{marginLeft:"10px"},onClick:function(){var e=f.getFieldsValue();a(e)}},"Unsubscribe"):null))));return c.a.createElement(b.a,{title:"Subscriber"},g)},v=a(148),y=a(248),w=function(e){var t=e.payload,a=Object(n.useState)([]),o=Object(r.a)(a,2),l=o[0],s=o[1];Object(n.useEffect)((function(){t.topic&&s((function(e){return[].concat(Object(v.a)(e),[t])}))}),[t]);return c.a.createElement(b.a,{title:"Receiver"},c.a.createElement("div",{style:{height:200,overflowY:"scroll"}},c.a.createElement(y.b,{size:"small",bordered:!0,dataSource:l,renderItem:function(e){return c.a.createElement(y.b.Item,null,c.a.createElement(y.b.Item.Meta,{title:e.topic,description:e.message}))}})))},I=a(144),O=a.n(I),j=a(146),C=Object(n.createContext)([]),q=[{label:"0",value:0},{label:"1",value:1},{label:"2",value:2}],S=function(){var e=Object(n.useState)(null),t=Object(r.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)(!1),s=Object(r.a)(l,2),i=s[0],m=s[1],u=Object(n.useState)({}),p=Object(r.a)(u,2),b=p[0],E=p[1],d=Object(n.useState)("Connect"),v=Object(r.a)(d,2),y=v[0],I=v[1];Object(n.useEffect)((function(){a&&(a.on("connect",(function(){I("Connected"),j.a.success({message:"connection successful"})})),a.on("error",(function(e){j.a.error("Connection error! "),console.log(e),a.end()})),a.on("reconnect",(function(){I("Reconnecting")})),a.on("message",(function(e,t){var a={topic:e,message:t.toString()};E(a),console.log("received message: ".concat(t," from topic: ").concat(e))})))}),[a]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(f,{connect:function(e,t){I("Connecting"),o(O.a.connect(e,t))},disconnect:function(){if(a)try{a.end(!1,(function(){I("Connect"),j.a.success({message:"disconnected successfully"})}))}catch(e){console.log("disconnect error:",e)}},connectBtn:y}),c.a.createElement(C.Provider,{value:q},c.a.createElement(h,{sub:function(e){if(a){var t=e.topic,n=e.qos;a.subscribe(t,{qos:n},(function(e){e?console.log("Subscribe to topics error",e):(console.log("Subscribe to topics: ".concat(t)),m(!0))}))}},unSub:function(e){if(a){var t=e.topic,n=e.qos;a.unsubscribe(t,{qos:n},(function(e){e?console.log("Unsubscribe error",e):(console.log("unsubscribed topic: ".concat(t)),m(!1))}))}},showUnsub:i}),c.a.createElement(g,{publish:function(e){if(a){var t=e.topic,n=e.qos,c=e.payload;a.publish(t,c,{qos:n},(function(e){e&&console.log("Publish error: ",e)}))}}})),c.a.createElement(w,{payload:b}))};a(240);var k=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(S,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.createRoot(document.getElementById("root")).render(c.a.createElement(k,null)),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[151,1,2]]]);
//# sourceMappingURL=main.93ec0119.chunk.js.map